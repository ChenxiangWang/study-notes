# xss 跨站脚本攻击

攻击者的目的是将恶意代码插入到页面当中，利用 后端的漏洞 或者 前端的漏洞。

后端的漏洞：没有对用户的输入做出处理，错误的把用户输入的数据当成正常数据返回客服端或者存入到数据库里，下次使用。

前端的漏洞：没有对用户的输入做出合理的过滤，当需要根据用户输入动态生成节点的时候，会把恶意代码植入到用户的页面中。

## 反射型

通过url 插入一段脚本 传递给服务器，服务器接收到后没有做处理，服务器将这个插入的脚本代码作为内容的一部分发送给客服端，此时的

## 存储型

通过get post请求，服务端没有过滤用户的输入，将用户的输入当成数据的一部分，存储到数据库当中。

## DOM型

纯前端的职责，没有对用户的数据进行过滤，动态的根据用户的输入生成一个DOM，插入到页面过程中也把恶意代码查到用户的页面中。

# 存在根本的原因

1. 没有对用户的数据做相应的过滤，服务器简单的把用户的输入当作内容直接返回给用户，或者存储的数据库当中。当页面需要这个数据的时候，就会当作页面内容的一部分发送给客户端。

2. 前端的js脚本没有对用户的输入过滤，动态的根据用户的输入生成新的DOM的时候，错误的将恶意的代码插入的页面当中，前端页面不基于后端，也可以发起攻击。

# 防范手段

本质是对用户的输入进行过滤，对输出进行编码，cookie设置成 httpOnly

## 输入处理

对 "<>"过滤或转译

## 输出处理

将 < 转换成 “&lt”

将 > 转换成 “&gt”

## httpOnly

设置完成后，js无法读取cookies。